schema: '2.0'
stages:
  sync_negative_train_samples:
    cmd: aws s3 cp s3://ezra-ml-dvc/reporter/df_negative_for_train_and_stats.csv ./data/df_negative_for_train_and_stats.csv
    deps:
    - path: s3://ezra-ml-dvc/reporter/df_negative_for_train_and_stats.csv
      etag: f6b1f978f37012919aaefc68fe6e07e7
      size: 1592506
    outs:
    - path: data/df_negative_for_train_and_stats.csv
      md5: f6b1f978f37012919aaefc68fe6e07e7
      size: 1592506
  sync_positive_train_samples:
    cmd: aws s3 cp s3://ezra-ml-dvc/reporter/df_positive_w_id_for_train_and_stats.csv
      ./data/df_positive_w_id_for_train_and_stats.csv
    deps:
    - path: s3://ezra-ml-dvc/reporter/df_positive_w_id_for_train_and_stats.csv
      etag: 60d30f28dbc13dd65f763d97f7d0a802
      size: 3761166
    outs:
    - path: data/df_positive_w_id_for_train_and_stats.csv
      md5: cb351a0d8e69b4cb263e6265bb5bfff2
      size: 3761166
  sync_snippet_database:
    cmd: aws s3 cp s3://ezra-ml-dvc/reporter/cleaned_snippets_with_org_name_new_rows.csv
      ./data/cleaned_snippets_with_org_name_new_rows.csv
    deps:
    - path: s3://ezra-ml-dvc/reporter/cleaned_snippets_with_org_name_new_rows.csv
      etag: 945af0c2c6c3518377534b8740b0a0a5
      size: 799345
    outs:
    - path: data/cleaned_snippets_with_org_name_new_rows.csv
      md5: 5376aeada62a4fb140929455ffe52e76
      size: 799345
  sync_uml_sbert:
    cmd: aws s3 cp s3://ezra-ml-dvc/reporter/UMLSBert ./data/UMLSBert --recursive
    deps:
    - path: s3://ezra-ml-dvc/reporter/UMLSBert/config.json
      etag: 1548c9643eaee9881e522896ebc96396
      size: 605
    - path: s3://ezra-ml-dvc/reporter/UMLSBert/pytorch_model.bin
      etag: f4890ddef1813d95f0b2c3ec7b469d46-53
      size: 438007537
    - path: s3://ezra-ml-dvc/reporter/UMLSBert/vocab.txt
      etag: 7f5029172a4e3c1198f13c92bdb06d89
      size: 225062
    outs:
    - path: data/UMLSBert/config.json
      md5: 1548c9643eaee9881e522896ebc96396
      size: 605
    - path: data/UMLSBert/pytorch_model.bin
      md5: e51a431feca65ed1e7784312cf1af54d
      size: 438007537
    - path: data/UMLSBert/vocab.txt
      md5: 7f5029172a4e3c1198f13c92bdb06d89
      size: 225062
  embed_umlsbert_snippets:
    cmd: docker-compose run ml.thageesan "python -m ai.data_pipeline.embed_snippets_umlsbert
      ."
    deps:
    - path: ai/data_pipeline/embed_snippets_umlsbert/__init__.py
      md5: a178f5c558155c07b9bcc643d8dcb4de
      size: 1966
    - path: ai/data_pipeline/embed_snippets_umlsbert/__main__.py
      md5: d0d8170aef7d5d0e5662af9ca9cd4eb0
      size: 254
    - path: data/UMLSBert/config.json
      md5: 1548c9643eaee9881e522896ebc96396
      size: 605
    - path: data/UMLSBert/pytorch_model.bin
      md5: e51a431feca65ed1e7784312cf1af54d
      size: 438007537
    - path: data/UMLSBert/vocab.txt
      md5: 7f5029172a4e3c1198f13c92bdb06d89
      size: 225062
    - path: data/cleaned_snippets_with_org_name_new_rows.csv
      md5: 5376aeada62a4fb140929455ffe52e76
      size: 799345
    outs:
    - path: data/embed_snippets_umlsbert.parquet
      md5: 0a331a7763ad4e941fa3c1950550809a
      size: 283861
  sync_bio_sent:
    cmd: aws s3 cp s3://ezra-ml-dvc/reporter/bioSent2Vec.bin ./data/bioSent2Vec.bin
    deps:
    - path: s3://ezra-ml-dvc/reporter/bioSent2Vec.bin
      etag: 9f3ca0f37ada92f6dc6643d59cd51d82-2680
      size: 22475736490
    outs:
    - path: data/bioSent2Vec.bin
      md5: e0c6c5cf7e4f8e88ec253ee46b461e58
      size: 22475736490
  embed_biosent_snippets:
    cmd: docker-compose run ml.thageesan "python -m ai.data_pipeline.embed_snippets_biosent
      ."
    deps:
    - path: ai/data_pipeline/embed_snippets_biosent/__init__.py
      md5: d80eb032905990061e1a0570f042f42a
      size: 1781
    - path: ai/data_pipeline/embed_snippets_biosent/__main__.py
      md5: 94ac76570d1c72169c160c4b73b57c10
      size: 252
    - path: data/bioSent2Vec.bin
      md5: e0c6c5cf7e4f8e88ec253ee46b461e58
      size: 22475736490
    - path: data/cleaned_snippets_with_org_name_new_rows.csv
      md5: 5376aeada62a4fb140929455ffe52e76
      size: 799345
    outs:
    - path: data/embed_snippets_biosent.parquet
      md5: 3cd06d870b1b6fc237785305c7239caa
      size: 248628
